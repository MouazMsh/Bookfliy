<%- include('partials/header.ejs') %>

<section class="container py-5 mt-5 mb-md-3 mb-lg-4 mb-xxl-5 font">

    <!-- Title -->
    <h1 class="text-center text-info">Book Dashboard</h1>
    <p class="text-center text-success pb-4 mb-2 mb-lg-3">Add, Edit and Delete books from your collection</p>

    <!-- Cards -->
    <div class="row text-center">
        <div class="col-sm mb-3 mb-sm-0">
          <div class="card p-4 rounded-5 border-3 border-primary">
            <div class="card-body">
              <h5 class="card-title text-primary">Add New Book</h5>
              <p class="card-text">Add a book to your collection (you will need ISBN "The International Standard Book Number")</p>
              <a href="/newbook" class="btn btn-primary">Take me there</a>
            </div>
          </div>
        </div>

        <div class="col-sm mb-3 mb-sm-0">
          <div class="card p-4 rounded-5 border-3 border-primary">
            <div class="card-body">
              <h5 class="card-title text-info">Edit book Note</h5>
              <p class="card-text">Edit book's notes</p>
              <a href="/notes" class="btn btn-primary">Take me there</a>
            </div>
          </div>
        </div>

        <div class="col-sm">
            <div class="card p-4 rounded-5 border-3 border-primary">
              <div class="card-body">
                <h5 class="card-title text-danger">Delete book</h5>
                <p class="card-text">Delete a book from your collection</p>
                <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deletebook">Take me there</a>
              </div>
            </div>
          </div>
    </div>
</section>

<!-- Delete Modal -->
<div class="modal fade" id="deletebook" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" >Delete Book</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form method="post" autocomplete="off">
                <div class="row justify-content-center">
                  <div class="col-sm-12 my-2">
                    <select class="form-select" aria-label="Default select example" name="selectbookname" required>
                      <option value="" selected>Select Book</option>
                      <% if(locals.book) { %>
                        <% book.forEach(element => { %> 
                          <option value="<%= element.title %>"> <%= element.title %> </option>               
                        <% }); %>
                      <% } %>
                    </select>
                  </div>
                  <div class="col-sm-6">
                    <div class="d-grid my-2">
                      <button class="btn btn-primary btn-lg" type="submit" formaction="/deletebook">Delete</button>
                    </div>
                  </div>
                </div>
            </form>  
        </div>
      </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>